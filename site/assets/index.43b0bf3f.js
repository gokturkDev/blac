var ee=Object.defineProperty,te=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var _=(s,e,n)=>e in s?ee(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,v=(s,e)=>{for(var n in e||(e={}))re.call(e,n)&&_(s,n,e[n]);if(D)for(var n of D(e))se.call(e,n)&&_(s,n,e[n]);return s},K=(s,e)=>te(s,ne(e));var a=(s,e,n)=>(_(s,typeof e!="symbol"?e+"":e,n),n);import{R as t,r as u,B as i,C,a as B,T as d,b as oe,m as G,c as L,D as I,S as ae,d as j,P as le,u as ce,L as ie,e as ue,f as de,g as he,h as me,i as pe,j as be,F as Ee,k as ve,A as fe,l as ge,I as Ce,n as Be,H as F,o as H,p as J,q as Le,s as U,t as we,v as xe,w as ye,x as ke}from"./vendor.343c9802.js";const Se=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}};Se();const S="data.",Te={persistKey:"",persistData:!0},N=()=>"_"+Math.random().toString(36).substr(2,9);class Oe{constructor(e){a(this,"isClosed",!1);a(this,"prevValue");a(this,"value");a(this,"observers",[]);this.value=e}getValue(){return this.value}subscribe(e){const n=N();return this.observers.push({observer:e,id:n}),this.triggerObservers(),{unsubscribe:()=>this.removeObserver(n)}}complete(){this.observers=[],this.isClosed=!0}next(e){this.value=e,this.triggerObservers()}triggerObservers(){this.observers.forEach(({observer:e})=>{e.next(this.value)})}removeObserver(e){this.observers=this.observers.filter(({id:n})=>n!==e)}}class Pe{constructor(e,n={}){a(this,"isClosed",!1);a(this,"removeListeners",[]);a(this,"_options");a(this,"_subject");a(this,"removeRemoveListener",e=>{this.removeListeners.splice(e,1)});a(this,"addRemoveListener",e=>{const n=this.removeListeners.length;return this.removeListeners.push(e),()=>this.removeRemoveListener(n)});a(this,"subscribe",e=>this._subject.subscribe({next:e.next}));a(this,"complete",()=>{this.isClosed=!0,this._subject.complete()});a(this,"clearCache",()=>{const e=this._options.persistKey;e&&localStorage.removeItem(`${S}${e}`)});a(this,"next",e=>{this._subject.next(e),this.updateCache()});a(this,"getCachedValue",()=>{const e=localStorage.getItem(`${S}${this._options.persistKey}`);if(e)try{return this.jsonToState(e)}catch(n){const r=new Error(`Failed to parse JSON in localstorage for the key: "${S}${this._options.persistKey}"`);return console.error(r),r}return new Error("Key not found")});a(this,"updateCache",()=>{const{persistData:e,persistKey:n}=this._options;e&&n?localStorage.setItem(`${S}${n}`,this.stateToJson(this.state)):this.clearCache()});let r=e;const o=v(v({},Te),n);if(this._options=o,o.persistKey&&o.persistData){const l=this.getCachedValue();l instanceof Error||(r=l)}this._subject=new Oe(r)}get state(){return this._subject.getValue()}jsonToState(e){return JSON.parse(e).state}stateToJson(e){return JSON.stringify({state:e})}}class q extends Pe{constructor(e,n={}){super(e,n);a(this,"id",N());a(this,"createdAt",new Date);a(this,"meta",{scope:"unknown"});a(this,"changeListeners",[]);a(this,"registerListeners",[]);a(this,"valueChangeListeners",[]);a(this,"consumer",null);a(this,"removeChangeListener",e=>{this.changeListeners.splice(e,1)});a(this,"addChangeListener",e=>{const n=this.changeListeners.length;return this.changeListeners.push(e),()=>this.removeChangeListener(n)});a(this,"removeValueChangeListener",e=>{this.valueChangeListeners.splice(e,1)});a(this,"addValueChangeListener",e=>{const n=this.valueChangeListeners.length;return this.valueChangeListeners.push(e),()=>this.removeValueChangeListener(n)});a(this,"removeRegisterListener",e=>{this.registerListeners.splice(e,1)});a(this,"addRegisterListener",e=>{const n=this.registerListeners.length;return this.registerListeners.push(e),()=>this.removeRegisterListener(n)});a(this,"notifyChange",e=>{var n;(n=this.consumer)==null||n.notifyChange(this,e),this.changeListeners.forEach(r=>r({currentState:this.state,nextState:e},this))});a(this,"notifyValueChange",()=>{var e;(e=this.consumer)==null||e.notifyValueChange(this),this.valueChangeListeners.forEach(n=>n(this.state,this))})}}class w extends q{constructor(){super(...arguments);a(this,"emit",e=>{this.notifyChange(e),this.next(e),this.notifyValueChange()})}}class m extends w{constructor(e=0){super(e);a(this,"increment",()=>{this.emit(this.state+1)});a(this,"decrement",()=>{this.emit(this.state-1)})}}class x extends w{constructor(e=1e3){super(0);a(this,"increment",()=>{this.emit(this.state+1)});const n=setInterval(()=>{this.increment()},e);this.addRemoveListener(()=>clearInterval(n))}}class T extends x{constructor(e){super(e)}}class W{constructor(e={}){a(this,"darkMode");this.darkMode=Boolean(e.darkMode)}}class V extends w{constructor(){super(new W({darkMode:!0}),{persistKey:"preferences"});a(this,"toggleTheme",()=>{this.emit(new W(K(v({},this.state),{darkMode:!this.state.darkMode})))})}}class Re extends q{constructor(e,n){super(e,n);a(this,"onTransition",null);a(this,"mapEventToState",null);a(this,"add",e=>{if(this.mapEventToState){const n=this.mapEventToState(e);this.notifyChange(n),this.notifyTransition(n,e),this.next(n),this.notifyValueChange()}else console.error(`"mapEventToState" not implemented for "${this.constructor.name}"`)});a(this,"notifyTransition",(e,n)=>{var r,o;(r=this.consumer)==null||r.notifyTransition(this,e,n),(o=this.onTransition)==null||o.call(this,{currentState:this.state,event:n,nextState:e})})}}var p;(function(s){s.unknown="unknown",s.authenticated="authenticated",s.unauthenticated="unauthenticated"})(p||(p={}));class $ extends Re{constructor(){super(!1,{persistKey:"auth"});this.mapEventToState=e=>{switch(e){case p.unknown:return!1;case p.unauthenticated:return!1;case p.authenticated:return!0}},this.addRegisterListener(e=>{e.addBlocChangeObserver(m,(n,r)=>{r.nextState===10&&this.add(p.unknown)})})}}class X{constructor(e={}){a(this,"onChange");a(this,"onTransition");a(this,"addChange",(e,n)=>{this.onChange(e,this.createChangeEvent(e,n))});a(this,"addTransition",(e,n,r)=>{this.onTransition(e,this.createTransitionEvent(e,n,r))});a(this,"addBlocAdded",e=>{this.onBlocAdded(e)});a(this,"addBlocRemoved",e=>{this.onBlocRemoved(e)});a(this,"defaultAction",()=>{});a(this,"onBlocAdded",this.defaultAction);a(this,"onBlocRemoved",this.defaultAction);this.onChange=e.onChange?e.onChange:this.defaultAction,this.onTransition=e.onTransition?e.onTransition:this.defaultAction}createTransitionEvent(e,n,r){return{currentState:e.state,event:r,nextState:n}}createChangeEvent(e,n){return{currentState:e.state,nextState:n}}}class Me{constructor(e,n={}){a(this,"observer");a(this,"mocksEnabled",!1);a(this,"providerList",[]);a(this,"blocListGlobal");a(this,"blocChangeObservers",[]);a(this,"blocValueChangeObservers",[]);a(this,"mockBlocs",[]);this.blocListGlobal=e,this.observer=n.observer||new X;for(const r of e)r.consumer=this,r.registerListeners.forEach(o=>o(this,r)),r.meta.scope="global",this.observer.addBlocAdded(r)}notifyChange(e,n){if(!e.isClosed){this.observer.addChange(e,n);for(const[r,o,l]of this.blocChangeObservers){const c=this.blocListGlobal.indexOf(e)!==-1;(l==="all"||c&&l==="global"||!c&&l==="local")&&e instanceof r&&o(e,{nextState:n,currentState:e.state})}}}notifyValueChange(e){if(!e.isClosed)for(const[n,r,o]of this.blocValueChangeObservers){const l=this.blocListGlobal.indexOf(e)!==-1;(o==="all"||l&&o==="global"||!l&&o==="local")&&e instanceof n&&r(e)}}notifyTransition(e,n,r){e.isClosed||this.observer.addTransition(e,n,r)}addBlocChangeObserver(e,n,r="all"){this.blocChangeObservers.push([e,n,r])}addBlocValueChangeObserver(e,n,r="all"){this.blocValueChangeObservers.push([e,n,r])}addLocalBloc(e){this.providerList.push(e),e.bloc.consumer=this,e.bloc.registerListeners.forEach(n=>n(this,e.bloc)),e.bloc.meta.scope="local",this.observer.addBlocAdded(e.bloc)}removeLocalBloc(e,n){const r=this.providerList.find(o=>o.id===e&&o.bloc===n);r&&(r.bloc.complete(),r.bloc.removeListeners.forEach(o=>o()),this.observer.addBlocRemoved(r.bloc),this.providerList=this.providerList.filter(o=>o!==r))}addBlocMock(e){this.mocksEnabled&&(this.mockBlocs=[e,...this.mockBlocs])}resetMocks(){this.mockBlocs=[]}getGlobalBloc(e){if(this.mocksEnabled){const n=this.mockBlocs.find(r=>r instanceof e);if(n)return n}return this.blocListGlobal.find(n=>n instanceof e)}getLocalBlocForProvider(e,n){for(const r of this.providerList)if(r.id===e){if(r.bloc instanceof n)return r.bloc;let o=r.parent;for(;o;){const l=this.providerList.find(c=>c.id===o);if((l==null?void 0:l.bloc)instanceof n)return l.bloc;o=l==null?void 0:l.parent}}}getGlobalBlocInstance(e,n){if(this.mocksEnabled){const r=this.mockBlocs.find(o=>o instanceof n);if(r)return r}return e.find(r=>r instanceof n)}}const Ae={subscribe:!0};class _e{constructor(e){a(this,"error");this.error=new Error(e)}}class Ne{}class z extends Me{constructor(e,n){super(e,n);a(this,"providerCount",0);a(this,"_blocsGlobal");a(this,"_contextLocalProviderKey",t.createContext("none"));a(this,"useBloc",(e,n={})=>{const r=v(v({},Ae),n);let o=u.exports.useMemo(()=>n.create?n.create():void 0,[]);if(!o){const h=u.exports.useContext(this._contextLocalProviderKey),k=u.exports.useMemo(()=>this.getLocalBlocForProvider(h,e),[]);o=u.exports.useMemo(()=>k||this.getGlobalBlocInstance(this._blocsGlobal,e),[])}const{subscribe:l,shouldUpdate:c=!0}=r;if(!o){const h=e.prototype.constructor.name,k=new _e(`"${h}" 
      no bloc with this name was found in the global context.
      
      # Solutions:
      
      1. Wrap your code in a BlocProvider.
      
      2. Add "${h}" to the "BlocReact" constructor:
        const state = new BlocReact(
          [
            ...
            new ${h}(),
          ]
        )
      `);return console.error(k.error),[Ne,{},{error:k,complete:!0}]}const[g,A]=u.exports.useState(o.state),Z=u.exports.useCallback(h=>{(c===!0||c({nextState:h,currentState:g}))&&A(h)},[]);return u.exports.useEffect(()=>{if(l){const h=o==null?void 0:o.subscribe({next:Z});return()=>{h==null||h.unsubscribe()}}},[]),[g,o]});a(this,"withBlocProvider",e=>n=>{const{BlocProvider:r}=this;return class extends t.Component{render(){return t.createElement(r,{bloc:e},t.createElement(n,v({},this.props)))}}});this._blocsGlobal=e,this.BlocProvider=this.BlocProvider.bind(this),this.BlocBuilder=this.BlocBuilder.bind(this)}BlocBuilder(e){const n=this.useBloc(e.blocClass,{shouldUpdate:e.shouldUpdate});return e.builder(n)}BlocProvider(e){const n=u.exports.useMemo(()=>N(),[]),r=u.exports.useContext(this._contextLocalProviderKey),o=u.exports.useMemo(()=>{const c=typeof e.bloc=="function"?e.bloc(n):e.bloc;return c?this.addLocalBloc({bloc:c,id:n,parent:r}):console.error("BLoC is undefined"),c},[]),l=u.exports.useMemo(()=>t.createContext(o),[o]);return u.exports.useEffect(()=>()=>{this.removeLocalBloc(n,o)},[]),t.createElement(this._contextLocalProviderKey.Provider,{value:n},t.createElement(l.Provider,{value:o},e.children))}}class O{constructor(e,n){a(this,"blocs");a(this,"updated");this.blocs=e,this.updated=n}}class Ve extends w{constructor(){super(new O([]));a(this,"add",e=>{this.emit(new O([...this.state.blocs,e]))});a(this,"remove",e=>{this.emit(new O(this.state.blocs.filter(n=>n.id!==e.id)))});a(this,"update",e=>{this.emit(new O(this.state.blocs.map(n=>n.id===e.id?e:n),e))})}}const P=new Ve,$e=new z([P]);$e.useBloc;class De extends X{constructor(){super();this.onBlocAdded=e=>{P.add(e)},this.onBlocRemoved=e=>{P.remove(e)},this.onChange=e=>{P.update(e)}}}const Ke=new z([new V,new $,new m],{observer:new De}),{useBloc:b,BlocBuilder:f,BlocProvider:E,withBlocProvider:Ge}=Ke;function y(){const[,{increment:s,decrement:e}]=b(m,{subscribe:!1});return t.createElement("div",null,t.createElement(i,{color:"secondary",onClick:e},"DECREMENT"),t.createElement(i,{color:"primary",onClick:s},"INCREMENT"))}class R extends w{constructor(){super("one")}}function Ie(){const[s,e]=b($);return t.createElement(C,null,t.createElement(B,null,t.createElement(d,null,"State: ",JSON.stringify(s)),t.createElement(oe,null,t.createElement(i,{onClick:()=>e.add(p.authenticated)},"Login"),t.createElement(i,{onClick:()=>e.add(p.unknown)},"Unknown"),t.createElement(i,{onClick:()=>e.add(p.unauthenticated)},"logout"))))}const je=G(s=>({toolbar:s.mixins.toolbar})),Fe=()=>{const[s,e]=b(R);return t.createElement(i,{onClick:()=>e.emit(`${Math.random()}`)},s)},He=()=>{const[s]=b(T,{create:()=>new T(300)});return t.createElement("div",null,"Local: ",s)},Je=({text:s})=>{const[e]=b(T);return t.createElement("div",null,s,": ",e)},Ue=Ge(new T(2e3))(Je),qe=()=>{const[s,e]=u.exports.useState(!1),[n,r]=b(R);return t.createElement("div",null,t.createElement(y,null),s&&t.createElement("div",null,n,t.createElement("hr",null),t.createElement(E,{bloc:()=>new m},t.createElement(d,{variant:"h4"},"Local Provider #1"),t.createElement(f,{blocClass:m,builder:([o,{increment:l}])=>t.createElement("div",null,t.createElement(i,{onClick:()=>l()},o),t.createElement(y,null))}))),";",t.createElement(I,null),t.createElement(i,{onClick:()=>r.emit(`${Math.random()}`)},"RND"),t.createElement(i,{onClick:()=>e(!s)},"Toggle"))};function Q(){const[s,e]=u.exports.useState(!1),n=je();return t.createElement(t.Fragment,null,t.createElement(L,{height:100}),t.createElement("div",{className:n.toolbar}),t.createElement(d,{variant:"h3"},"Bloc"),t.createElement(Ie,null),t.createElement(L,{m:2}),t.createElement(d,{variant:"h3"},"BlocBuilder"),t.createElement(C,null,t.createElement(B,null,t.createElement(f,{blocClass:m,builder:([r,{increment:o}])=>t.createElement("div",null,t.createElement(i,{onClick:()=>o()},r))}),t.createElement(y,null),t.createElement(L,{m:2}),t.createElement(f,{blocClass:$,builder:([r,{add:o}])=>t.createElement("div",null,t.createElement(i,{onClick:()=>o(p.authenticated)},"Auth Bloc State: ",t.createElement("b",null,r.toString())))}))),t.createElement(L,{m:2}),t.createElement(d,{variant:"h3"},"Breaking"),t.createElement(C,null,t.createElement(B,null,t.createElement(E,{bloc:()=>new R},t.createElement(qe,null)))),t.createElement(L,{m:2}),t.createElement(d,{variant:"h3"},"Local Bloc Hook"),t.createElement(C,null,t.createElement(B,null,t.createElement(He,null))),t.createElement(L,{m:2}),t.createElement(d,{variant:"h3"},"Local Bloc HOC"),t.createElement(C,null,t.createElement(B,null,t.createElement(Ue,{text:"HOC with props"}))),t.createElement(d,{variant:"h3"},"Local Providers"),t.createElement(C,null,t.createElement(B,null,t.createElement(E,{bloc:()=>new x},t.createElement(d,{variant:"h4"},"Local Counter Timer"),t.createElement(f,{blocClass:x,builder:([r])=>t.createElement("div",null,t.createElement(i,null,r))})),t.createElement(E,{bloc:()=>new x(500)},t.createElement(d,{variant:"h4"},"Local Counter Timer 2"),t.createElement(f,{blocClass:x,builder:([r])=>t.createElement("div",null,t.createElement(i,null,r))})),t.createElement(E,{bloc:()=>new m},t.createElement(d,{variant:"h4"},"Local Provider #1"),t.createElement(f,{blocClass:m,builder:([r,{increment:o}])=>t.createElement("div",null,t.createElement(i,{onClick:()=>o()},r),t.createElement(y,null))})),t.createElement(E,{bloc:()=>new m},t.createElement(d,{variant:"h4"},"Local Provider #2"),t.createElement(f,{blocClass:m,builder:([r,{increment:o}])=>t.createElement("div",null,t.createElement(i,{onClick:()=>o()},r),t.createElement(y,null))})),t.createElement(E,{bloc:new m},t.createElement(E,{bloc:new R},s&&t.createElement(Fe,null)),t.createElement(i,{onClick:()=>e(!s)},"Toggle Show")))))}function We(){return t.createElement(ae,null,t.createElement(j,{path:"/"},t.createElement(Q,null)),t.createElement(j,{path:"/sandbox"},t.createElement(Q,null)))}const M=240,Xe=G(s=>({root:{display:"flex"},drawer:{[s.breakpoints.up("sm")]:{width:M,flexShrink:0}},appBar:{[s.breakpoints.up("sm")]:{width:`calc(100% - ${M}px)`,marginLeft:M}},menuButton:{marginRight:s.spacing(2),[s.breakpoints.up("sm")]:{display:"none"}},toolbar:s.mixins.toolbar,drawerPaper:{width:M},content:{flexGrow:1,padding:s.spacing(3),marginBottom:"400px"}}));function Y(){const s=Xe(),e=ce(),[n,r]=t.useState(!1),[{darkMode:o},l]=b(V),c=()=>{r(!n)},g=t.createElement("div",null,t.createElement("div",{className:s.toolbar}),t.createElement(I,null),t.createElement(ie,null,t.createElement(ue,{button:!0,component:de,to:"/sandbox"},t.createElement(he,null,t.createElement(me,null)),t.createElement(pe,{primary:"Sandbox"}))),t.createElement(be,null,t.createElement(Ee,{control:t.createElement(ve,{checked:o,onChange:()=>l.toggleTheme(),name:"Dark mode"}),label:"Dark Mode"}))),A=document.body;return t.createElement("div",{className:s.root},t.createElement(fe,{position:"fixed",className:s.appBar},t.createElement(ge,null,t.createElement(Ce,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:c,className:s.menuButton},t.createElement(Be,null)),t.createElement(d,{variant:"h6",noWrap:!0},"Responsive drawer"))),t.createElement("nav",{className:s.drawer,"aria-label":"mailbox folders"},t.createElement(F,{smUp:!0,implementation:"css"},t.createElement(H,{container:A,variant:"temporary",anchor:e.direction==="rtl"?"right":"left",open:n,onClose:c,classes:{paper:s.drawerPaper},ModalProps:{keepMounted:!0}},g)),t.createElement(F,{xsDown:!0,implementation:"css"},t.createElement(H,{classes:{paper:s.drawerPaper},variant:"permanent",open:!0},g))),t.createElement("main",{className:s.content},t.createElement(We,null)))}Y.propTypes={window:le.func};const ze=J({palette:{type:"dark",primary:{main:Le.A200},secondary:{main:U.A200}}}),Qe=J({palette:{type:"light",primary:{main:U[500]},secondary:{main:"#11cb5f"}}});function Ye(){const[{darkMode:s}]=b(V);return t.createElement(we,{theme:s?ze:Qe},t.createElement(xe,null),t.createElement(ye,null,t.createElement(Y,null)))}ke.render(t.createElement(Ye,null),document.getElementById("root"));
