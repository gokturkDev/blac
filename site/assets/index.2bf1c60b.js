var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,i=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&o(e,n,t[n]);if(s)for(var n of s(t))a.call(t,n)&&o(e,n,t[n]);return e};import{n as l,R as c,r as h,B as u,C as d,a as m,T as b,b as p,m as v,c as E,D as g,S as f,d as C,P as L,u as x,L as B,e as w,f as y,g as k,h as S,i as T,j as O,F as P,k as R,A as M,l as A,I as V,o as _,H as j,p as N,q as K,s as D,t as I,v as $,w as G,x as J,y as F}from"./vendor.5f98cf0d.js";const U={persistKey:"",persistData:!0};class W{constructor(e){this.isClosed=!1,this.observers=[],this.value=e}getValue(){return this.value}subscribe(e){const t=l();return this.observers.push({observer:e,id:t}),this.triggerObservers(),{unsubscribe:()=>this.removeObserver(t)}}complete(){this.observers=[],this.isClosed=!0}next(e){this.value=e,this.triggerObservers()}triggerObservers(){this.observers.forEach((({observer:e})=>{e.next(this.value)}))}removeObserver(e){this.observers=this.observers.filter((({id:t})=>t!==e))}}class q extends class{constructor(e,t={}){this.isClosed=!1,this.removeListeners=[],this.removeRemoveListener=e=>{this.removeListeners.splice(e,1)},this.addRemoveListener=e=>{const t=this.removeListeners.length;return this.removeListeners.push(e),()=>this.removeRemoveListener(t)},this.subscribe=e=>this._subject.subscribe({next:e.next}),this.complete=()=>{this.isClosed=!0,this._subject.complete()},this.clearCache=()=>{const e=this._options.persistKey;e&&localStorage.removeItem(`data.${e}`)},this.next=e=>{this._subject.next(e),this.updateCache()},this.getCachedValue=()=>{const e=localStorage.getItem(`data.${this._options.persistKey}`);if(e)try{return this.jsonToState(e)}catch(t){const e=new Error(`Failed to parse JSON in localstorage for the key: "data.${this._options.persistKey}"`);return console.error(e),e}return new Error("Key not found")},this.updateCache=()=>{const{persistData:e,persistKey:t}=this._options;e&&t?localStorage.setItem(`data.${t}`,this.stateToJson(this.state)):this.clearCache()};let n=e;const s=i(i({},U),t);if(this._options=s,s.persistKey&&s.persistData){const e=this.getCachedValue();e instanceof Error||(n=e)}this._subject=new W(n)}get state(){return this._subject.getValue()}jsonToState(e){return JSON.parse(e).state}stateToJson(e){return JSON.stringify({state:e})}}{constructor(e,t={}){super(e,t),this.id=l(),this.createdAt=new Date,this.meta={scope:"unknown"},this.changeListeners=[],this.registerListeners=[],this.valueChangeListeners=[],this.consumer=null,this.removeChangeListener=e=>{this.changeListeners.splice(e,1)},this.addChangeListener=e=>{const t=this.changeListeners.length;return this.changeListeners.push(e),()=>this.removeChangeListener(t)},this.removeValueChangeListener=e=>{this.valueChangeListeners.splice(e,1)},this.addValueChangeListener=e=>{const t=this.valueChangeListeners.length;return this.valueChangeListeners.push(e),()=>this.removeValueChangeListener(t)},this.removeRegisterListener=e=>{this.registerListeners.splice(e,1)},this.addRegisterListener=e=>{const t=this.registerListeners.length;return this.registerListeners.push(e),()=>this.removeRegisterListener(t)},this.notifyChange=e=>{var t;null==(t=this.consumer)||t.notifyChange(this,e),this.changeListeners.forEach((t=>t({currentState:this.state,nextState:e},this)))},this.notifyValueChange=()=>{var e;null==(e=this.consumer)||e.notifyValueChange(this),this.valueChangeListeners.forEach((e=>e(this.state,this)))}}}class H extends q{constructor(){super(...arguments),this.emit=e=>{this.notifyChange(e),this.next(e),this.notifyValueChange()}}}class z extends H{constructor(){super(0),this.increment=()=>{this.emit(this.state+1)},this.decrement=()=>{this.emit(this.state-1)}}}class Q extends H{constructor(e=1e3){super(0),this.increment=()=>{this.emit(this.state+1)};const t=setInterval((()=>{this.increment()}),e);this.addRemoveListener((()=>clearInterval(t)))}}class X{constructor(e={}){this.darkMode=Boolean(e.darkMode)}}class Y extends H{constructor(){super(new X({darkMode:!0}),{persistKey:"preferences"}),this.toggleTheme=()=>{var e,s;this.emit(new X((e=i({},this.state),s={darkMode:!this.state.darkMode},t(e,n(s)))))}}}class Z extends q{constructor(e,t){super(e,t),this.onTransition=null,this.mapEventToState=null,this.add=e=>{if(this.mapEventToState){const t=this.mapEventToState(e);this.notifyChange(t),this.notifyTransition(t,e),this.next(t),this.notifyValueChange()}else console.error(`"mapEventToState" not implemented for "${this.constructor.name}"`)},this.notifyTransition=(e,t)=>{var n,s;null==(n=this.consumer)||n.notifyTransition(this,e,t),null==(s=this.onTransition)||s.call(this,{currentState:this.state,event:t,nextState:e})}}}var ee,te;(te=ee||(ee={})).unknown="unknown",te.authenticated="authenticated",te.unauthenticated="unauthenticated";class ne extends Z{constructor(){super(!1,{persistKey:"auth"}),this.mapEventToState=e=>{switch(e){case ee.unknown:case ee.unauthenticated:return!1;case ee.authenticated:return!0}},this.addRegisterListener((e=>{e.addBlocChangeObserver(z,((e,t)=>{10===t.nextState&&this.add(ee.unknown)}))}))}}class se{constructor(e={}){this.addChange=(e,t)=>{this.onChange(e,this.createChangeEvent(e,t))},this.addTransition=(e,t,n)=>{this.onTransition(e,this.createTransitionEvent(e,t,n))},this.addBlocAdded=e=>{this.onBlocAdded(e)},this.addBlocRemoved=e=>{this.onBlocRemoved(e)},this.defaultAction=()=>{},this.onBlocAdded=this.defaultAction,this.onBlocRemoved=this.defaultAction,this.onChange=e.onChange?e.onChange:this.defaultAction,this.onTransition=e.onTransition?e.onTransition:this.defaultAction}createTransitionEvent(e,t,n){return{currentState:e.state,event:n,nextState:t}}createChangeEvent(e,t){return{currentState:e.state,nextState:t}}}const re={subscribe:!0};class ae{constructor(e){this.error=new Error(e)}}class oe{}class ie extends class{constructor(e,t={}){this.mocksEnabled=!1,this.providerList=[],this.blocChangeObservers=[],this.blocValueChangeObservers=[],this.mockBlocs=[],this.blocListGlobal=e,this.observer=t.observer||new se;for(const n of e)n.consumer=this,n.registerListeners.forEach((e=>e(this,n))),n.meta.scope="global",this.observer.addBlocAdded(n)}notifyChange(e,t){if(!e.isClosed){this.observer.addChange(e,t);for(const[n,s,r]of this.blocChangeObservers){const a=-1!==this.blocListGlobal.indexOf(e);("all"===r||a&&"global"===r||!a&&"local"===r)&&e instanceof n&&s(e,{nextState:t,currentState:e.state})}}}notifyValueChange(e){if(!e.isClosed)for(const[t,n,s]of this.blocValueChangeObservers){const r=-1!==this.blocListGlobal.indexOf(e);("all"===s||r&&"global"===s||!r&&"local"===s)&&e instanceof t&&n(e)}}notifyTransition(e,t,n){e.isClosed||this.observer.addTransition(e,t,n)}addBlocChangeObserver(e,t,n="all"){this.blocChangeObservers.push([e,t,n])}addBlocValueChangeObserver(e,t,n="all"){this.blocValueChangeObservers.push([e,t,n])}addLocalBloc(e){this.providerList.push(e),e.bloc.consumer=this,e.bloc.registerListeners.forEach((t=>t(this,e.bloc))),e.bloc.meta.scope="local",this.observer.addBlocAdded(e.bloc)}removeLocalBloc(e,t){const n=this.providerList.find((n=>n.id===e&&n.bloc===t));n&&(n.bloc.complete(),n.bloc.removeListeners.forEach((e=>e())),this.observer.addBlocRemoved(n.bloc),this.providerList=this.providerList.filter((e=>e!==n)))}addBlocMock(e){this.mocksEnabled&&(this.mockBlocs=[e,...this.mockBlocs])}resetMocks(){this.mockBlocs=[]}getGlobalBloc(e){if(this.mocksEnabled){const t=this.mockBlocs.find((t=>t instanceof e));if(t)return t}return this.blocListGlobal.find((t=>t instanceof e))}getLocalBlocForProvider(e,t){for(const n of this.providerList)if(n.id===e){if(n.bloc instanceof t)return n.bloc;let e=n.parent;for(;e;){const n=this.providerList.find((t=>t.id===e));if((null==n?void 0:n.bloc)instanceof t)return n.bloc;e=null==n?void 0:n.parent}}}getBlocInstance(e,t){if(this.mocksEnabled){const e=this.mockBlocs.find((e=>e instanceof t));if(e)return e}return e.find((e=>e instanceof t))}}{constructor(e,t){super(e,t),this.providerCount=0,this._contextLocalProviderKey=c.createContext(0),this.useBloc=(e,t={})=>{const n=i(i({},re),t),s=h.exports.useContext(this._contextLocalProviderKey),r=h.exports.useMemo((()=>this.getLocalBlocForProvider(s,e)),[]),{subscribe:a,shouldUpdate:o=!0}=n,l=h.exports.useMemo((()=>r||this.getBlocInstance(this._blocsGlobal,e)),[]);if(!l){const t=e.prototype.constructor.name,n=new ae(`"${t}" \n      no bloc with this name was found in the global context.\n      \n      # Solutions:\n      \n      1. Wrap your code in a BlocProvider.\n      \n      2. Add "${t}" to the "BlocReact" constructor:\n        const state = new BlocReact(\n          [\n            ...\n            new ${t}(),\n          ]\n        )\n      `);return console.error(n.error),[oe,{},{error:n,complete:!0}]}const[c,u]=h.exports.useState(l.state),d=h.exports.useCallback((e=>{(!0===o||o({nextState:e,currentState:c}))&&u(e)}),[]);return h.exports.useEffect((()=>{if(a){const e=l.subscribe({next:d});return()=>{e.unsubscribe()}}}),[]),[c,l]},this._blocsGlobal=e,this.BlocProvider=this.BlocProvider.bind(this),this.BlocBuilder=this.BlocBuilder.bind(this)}BlocBuilder(e){const t=this.useBloc(e.blocClass,{shouldUpdate:e.shouldUpdate});return e.builder(t)}BlocProvider(e){const t=this.providerCount++,n=h.exports.useContext(this._contextLocalProviderKey),s=h.exports.useMemo((()=>{const s="function"==typeof e.bloc?e.bloc(t):e.bloc;return s?this.addLocalBloc({bloc:s,id:t,parent:n}):console.error("BLoC is undefined"),s}),[]),r=h.exports.useMemo((()=>c.createContext(s)),[s]);return h.exports.useEffect((()=>()=>{this.removeLocalBloc(t,s)}),[]),c.createElement(this._contextLocalProviderKey.Provider,{value:t},c.createElement(r.Provider,{value:s},e.children))}}class le{constructor(e,t){this.blocs=e,this.updated=t}}const ce=new class extends H{constructor(){super(new le([])),this.add=e=>{this.emit(new le([...this.state.blocs,e]))},this.remove=e=>{this.emit(new le(this.state.blocs.filter((t=>t.id!==e.id))))},this.update=e=>{this.emit(new le(this.state.blocs.map((t=>t.id===e.id?e:t)),e))}}};new ie([ce]).useBloc;const he=new ie([new Y,new ne,new z],{observer:new class extends se{constructor(){super(),this.onBlocAdded=e=>{ce.add(e)},this.onBlocRemoved=e=>{ce.remove(e)},this.onChange=e=>{ce.update(e)}}}}),{useBloc:ue,BlocBuilder:de,BlocProvider:me}=he;function be(){const[,{increment:e,decrement:t}]=ue(z,{subscribe:!1});return c.createElement("div",null,c.createElement(u,{color:"secondary",onClick:t},"DECREMENT"),c.createElement(u,{color:"primary",onClick:e},"INCREMENT"))}function pe(){const[e,t]=ue(ne);return c.createElement(d,null,c.createElement(m,null,c.createElement(b,null,"State: ",JSON.stringify(e)),c.createElement(p,null,c.createElement(u,{onClick:()=>t.add(ee.authenticated)},"Login"),c.createElement(u,{onClick:()=>t.add(ee.unknown)},"Unknown"),c.createElement(u,{onClick:()=>t.add(ee.unauthenticated)},"logout"))))}class ve extends H{constructor(){super("one")}}const Ee=v((e=>({toolbar:e.mixins.toolbar}))),ge=()=>{const[e,t]=ue(ve);return c.createElement(u,{onClick:()=>t.emit(`${Math.random()}`)},e)},fe=()=>{const[e,t]=h.exports.useState(!1),[n,s]=ue(ve);return c.createElement("div",null,c.createElement(be,null),e&&c.createElement("div",null,n,c.createElement("hr",null),c.createElement(me,{bloc:()=>new z},c.createElement(b,{variant:"h4"},"Local Provider #1"),c.createElement(de,{blocClass:z,builder:([e,{increment:t}])=>c.createElement("div",null,c.createElement(u,{onClick:()=>t()},e),c.createElement(be,null))}))),";",c.createElement(g,null),c.createElement(u,{onClick:()=>s.emit(`${Math.random()}`)},"RND"),c.createElement(u,{onClick:()=>t(!e)},"Toggle"))};function Ce(){const e=Ee();return c.createElement(c.Fragment,null,c.createElement("div",{className:e.toolbar}),c.createElement(b,{variant:"h3"},"Bloc"),c.createElement(pe,null),c.createElement(E,{m:2}),c.createElement(b,{variant:"h3"},"BlocBuilder"),c.createElement(d,null,c.createElement(m,null,c.createElement(de,{blocClass:z,builder:([e,{increment:t}])=>c.createElement("div",null,c.createElement(u,{onClick:()=>t()},e))}),c.createElement(be,null),c.createElement(E,{m:2}),c.createElement(de,{blocClass:ne,builder:([e,{add:t}])=>c.createElement("div",null,c.createElement(u,{onClick:()=>t(ee.authenticated)},"Auth Bloc State: ",c.createElement("b",null,e.toString())))}))),c.createElement(E,{m:2}),c.createElement(b,{variant:"h3"},"Breaking"),c.createElement(d,null,c.createElement(m,null,c.createElement(me,{bloc:()=>new ve},c.createElement(fe,null)))),c.createElement(b,{variant:"h3"},"Local Providers"),c.createElement(d,null,c.createElement(m,null,c.createElement(me,{bloc:()=>new Q},c.createElement(b,{variant:"h4"},"Local Counter Timer"),c.createElement(de,{blocClass:Q,builder:([e])=>c.createElement("div",null,c.createElement(u,null,e))})),c.createElement(me,{bloc:()=>new Q(500)},c.createElement(b,{variant:"h4"},"Local Counter Timer 2"),c.createElement(de,{blocClass:Q,builder:([e])=>c.createElement("div",null,c.createElement(u,null,e))})),c.createElement(me,{bloc:()=>new z},c.createElement(b,{variant:"h4"},"Local Provider #1"),c.createElement(de,{blocClass:z,builder:([e,{increment:t}])=>c.createElement("div",null,c.createElement(u,{onClick:()=>t()},e),c.createElement(be,null))})),c.createElement(me,{bloc:()=>new z},c.createElement(b,{variant:"h4"},"Local Provider #2"),c.createElement(de,{blocClass:z,builder:([e,{increment:t}])=>c.createElement("div",null,c.createElement(u,{onClick:()=>t()},e),c.createElement(be,null))})),c.createElement(me,{bloc:new z},c.createElement(me,{bloc:new ve},c.createElement(ge,null))))))}function Le(){return c.createElement(f,null,c.createElement(C,{path:"/"},c.createElement(Ce,null)),c.createElement(C,{path:"/sandbox"},c.createElement(Ce,null)))}const xe=v((e=>({root:{display:"flex"},drawer:{[e.breakpoints.up("sm")]:{width:240,flexShrink:0}},appBar:{[e.breakpoints.up("sm")]:{width:"calc(100% - 240px)",marginLeft:240}},menuButton:{marginRight:e.spacing(2),[e.breakpoints.up("sm")]:{display:"none"}},toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3),marginBottom:"400px"}})));function Be(){const e=xe(),t=x(),[n,s]=c.useState(!1),[{darkMode:r},a]=ue(Y),o=()=>{s(!n)},i=c.createElement("div",null,c.createElement("div",{className:e.toolbar}),c.createElement(g,null),c.createElement(B,null,c.createElement(w,{button:!0,component:y,to:"/sandbox"},c.createElement(k,null,c.createElement(S,null)),c.createElement(T,{primary:"Sandbox"}))),c.createElement(O,null,c.createElement(P,{control:c.createElement(R,{checked:r,onChange:()=>a.toggleTheme(),name:"Dark mode"}),label:"Dark Mode"}))),l=document.body;return c.createElement("div",{className:e.root},c.createElement(M,{position:"fixed",className:e.appBar},c.createElement(A,null,c.createElement(V,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:o,className:e.menuButton},c.createElement(_,null)),c.createElement(b,{variant:"h6",noWrap:!0},"Responsive drawer"))),c.createElement("nav",{className:e.drawer,"aria-label":"mailbox folders"},c.createElement(j,{smUp:!0,implementation:"css"},c.createElement(N,{container:l,variant:"temporary",anchor:"rtl"===t.direction?"right":"left",open:n,onClose:o,classes:{paper:e.drawerPaper},ModalProps:{keepMounted:!0}},i)),c.createElement(j,{xsDown:!0,implementation:"css"},c.createElement(N,{classes:{paper:e.drawerPaper},variant:"permanent",open:!0},i))),c.createElement("main",{className:e.content},c.createElement(Le,null)))}Be.propTypes={window:L.func};const we=K({palette:{type:"dark",primary:{main:D.A200},secondary:{main:I.A200}}}),ye=K({palette:{type:"light",primary:{main:I[500]},secondary:{main:"#11cb5f"}}});function ke(){const[{darkMode:e}]=ue(Y);return c.createElement($,{theme:e?we:ye},c.createElement(G,null),c.createElement(J,null,c.createElement(Be,null)))}F.render(c.createElement(ke,null),document.getElementById("root"));
