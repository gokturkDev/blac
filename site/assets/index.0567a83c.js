var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,l=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&a(e,n,t[n]);if(s)for(var n of s(t))o.call(t,n)&&a(e,n,t[n]);return e};import{R as i,r as c,B as h,C as u,a as d,T as m,b,m as p,c as E,D as v,S as g,d as f,P as C,u as x,L,e as B,f as w,g as y,h as k,i as S,j as T,F as O,k as P,A as M,l as R,I as A,n as _,H as V,o as j,p as N,q as K,s as D,t as I,v as G,w as $,x as J}from"./vendor.0371ebb9.js";const F={persistKey:"",persistData:!0},U=()=>"_"+Math.random().toString(36).substr(2,9);class H{constructor(e){this.isClosed=!1,this.observers=[],this.value=e}getValue(){return this.value}subscribe(e){const t=U();return this.observers.push({observer:e,id:t}),this.triggerObservers(),{unsubscribe:()=>this.removeObserver(t)}}complete(){this.observers=[],this.isClosed=!0}next(e){this.value=e,this.triggerObservers()}triggerObservers(){this.observers.forEach((({observer:e})=>{e.next(this.value)}))}removeObserver(e){this.observers=this.observers.filter((({id:t})=>t!==e))}}class W extends class{constructor(e,t={}){this.isClosed=!1,this.removeListeners=[],this.removeRemoveListener=e=>{this.removeListeners.splice(e,1)},this.addRemoveListener=e=>{const t=this.removeListeners.length;return this.removeListeners.push(e),()=>this.removeRemoveListener(t)},this.subscribe=e=>this._subject.subscribe({next:e.next}),this.complete=()=>{this.isClosed=!0,this._subject.complete()},this.clearCache=()=>{const e=this._options.persistKey;e&&localStorage.removeItem(`data.${e}`)},this.next=e=>{this._subject.next(e),this.updateCache()},this.getCachedValue=()=>{const e=localStorage.getItem(`data.${this._options.persistKey}`);if(e)try{return this.jsonToState(e)}catch(t){const e=new Error(`Failed to parse JSON in localstorage for the key: "data.${this._options.persistKey}"`);return console.error(e),e}return new Error("Key not found")},this.updateCache=()=>{const{persistData:e,persistKey:t}=this._options;e&&t?localStorage.setItem(`data.${t}`,this.stateToJson(this.state)):this.clearCache()};let n=e;const s=l(l({},F),t);if(this._options=s,s.persistKey&&s.persistData){const e=this.getCachedValue();e instanceof Error||(n=e)}this._subject=new H(n)}get state(){return this._subject.getValue()}jsonToState(e){return JSON.parse(e).state}stateToJson(e){return JSON.stringify({state:e})}}{constructor(e,t={}){super(e,t),this.id=U(),this.createdAt=new Date,this.meta={scope:"unknown"},this.changeListeners=[],this.registerListeners=[],this.valueChangeListeners=[],this.consumer=null,this.removeChangeListener=e=>{this.changeListeners.splice(e,1)},this.addChangeListener=e=>{const t=this.changeListeners.length;return this.changeListeners.push(e),()=>this.removeChangeListener(t)},this.removeValueChangeListener=e=>{this.valueChangeListeners.splice(e,1)},this.addValueChangeListener=e=>{const t=this.valueChangeListeners.length;return this.valueChangeListeners.push(e),()=>this.removeValueChangeListener(t)},this.removeRegisterListener=e=>{this.registerListeners.splice(e,1)},this.addRegisterListener=e=>{const t=this.registerListeners.length;return this.registerListeners.push(e),()=>this.removeRegisterListener(t)},this.notifyChange=e=>{var t;null==(t=this.consumer)||t.notifyChange(this,e),this.changeListeners.forEach((t=>t({currentState:this.state,nextState:e},this)))},this.notifyValueChange=()=>{var e;null==(e=this.consumer)||e.notifyValueChange(this),this.valueChangeListeners.forEach((e=>e(this.state,this)))}}}class q extends W{constructor(){super(...arguments),this.emit=e=>{this.notifyChange(e),this.next(e),this.notifyValueChange()}}}class z extends q{constructor(e=0){super(e),this.increment=()=>{this.emit(this.state+1)},this.decrement=()=>{this.emit(this.state-1)}}}class Q extends q{constructor(e=1e3){super(0),this.increment=()=>{this.emit(this.state+1)};const t=setInterval((()=>{this.increment()}),e);this.addRemoveListener((()=>clearInterval(t)))}}class X extends Q{constructor(e){super(e)}}class Y{constructor(e={}){this.darkMode=Boolean(e.darkMode)}}class Z extends q{constructor(){super(new Y({darkMode:!0}),{persistKey:"preferences"}),this.toggleTheme=()=>{var e,s;this.emit(new Y((e=l({},this.state),s={darkMode:!this.state.darkMode},t(e,n(s)))))}}}class ee extends W{constructor(e,t){super(e,t),this.onTransition=null,this.mapEventToState=null,this.add=e=>{if(this.mapEventToState){const t=this.mapEventToState(e);this.notifyChange(t),this.notifyTransition(t,e),this.next(t),this.notifyValueChange()}else console.error(`"mapEventToState" not implemented for "${this.constructor.name}"`)},this.notifyTransition=(e,t)=>{var n,s;null==(n=this.consumer)||n.notifyTransition(this,e,t),null==(s=this.onTransition)||s.call(this,{currentState:this.state,event:t,nextState:e})}}}var te,ne;(ne=te||(te={})).unknown="unknown",ne.authenticated="authenticated",ne.unauthenticated="unauthenticated";class se extends ee{constructor(){super(!1,{persistKey:"auth"}),this.mapEventToState=e=>{switch(e){case te.unknown:case te.unauthenticated:return!1;case te.authenticated:return!0}},this.addRegisterListener((e=>{e.addBlocChangeObserver(z,((e,t)=>{10===t.nextState&&this.add(te.unknown)}))}))}}class re{constructor(e={}){this.addChange=(e,t)=>{this.onChange(e,this.createChangeEvent(e,t))},this.addTransition=(e,t,n)=>{this.onTransition(e,this.createTransitionEvent(e,t,n))},this.addBlocAdded=e=>{this.onBlocAdded(e)},this.addBlocRemoved=e=>{this.onBlocRemoved(e)},this.defaultAction=()=>{},this.onBlocAdded=this.defaultAction,this.onBlocRemoved=this.defaultAction,this.onChange=e.onChange?e.onChange:this.defaultAction,this.onTransition=e.onTransition?e.onTransition:this.defaultAction}createTransitionEvent(e,t,n){return{currentState:e.state,event:n,nextState:t}}createChangeEvent(e,t){return{currentState:e.state,nextState:t}}}const oe={subscribe:!0};class ae{constructor(e){this.error=new Error(e)}}class le{}class ie extends class{constructor(e,t={}){this.mocksEnabled=!1,this.providerList=[],this.blocChangeObservers=[],this.blocValueChangeObservers=[],this.mockBlocs=[],this.blocListGlobal=e,this.observer=t.observer||new re;for(const n of e)n.consumer=this,n.registerListeners.forEach((e=>e(this,n))),n.meta.scope="global",this.observer.addBlocAdded(n)}notifyChange(e,t){if(!e.isClosed){this.observer.addChange(e,t);for(const[n,s,r]of this.blocChangeObservers){const o=-1!==this.blocListGlobal.indexOf(e);("all"===r||o&&"global"===r||!o&&"local"===r)&&e instanceof n&&s(e,{nextState:t,currentState:e.state})}}}notifyValueChange(e){if(!e.isClosed)for(const[t,n,s]of this.blocValueChangeObservers){const r=-1!==this.blocListGlobal.indexOf(e);("all"===s||r&&"global"===s||!r&&"local"===s)&&e instanceof t&&n(e)}}notifyTransition(e,t,n){e.isClosed||this.observer.addTransition(e,t,n)}addBlocChangeObserver(e,t,n="all"){this.blocChangeObservers.push([e,t,n])}addBlocValueChangeObserver(e,t,n="all"){this.blocValueChangeObservers.push([e,t,n])}addLocalBloc(e){this.providerList.push(e),e.bloc.consumer=this,e.bloc.registerListeners.forEach((t=>t(this,e.bloc))),e.bloc.meta.scope="local",this.observer.addBlocAdded(e.bloc)}removeLocalBloc(e,t){const n=this.providerList.find((n=>n.id===e&&n.bloc===t));n&&(n.bloc.complete(),n.bloc.removeListeners.forEach((e=>e())),this.observer.addBlocRemoved(n.bloc),this.providerList=this.providerList.filter((e=>e!==n)))}addBlocMock(e){this.mocksEnabled&&(this.mockBlocs=[e,...this.mockBlocs])}resetMocks(){this.mockBlocs=[]}getGlobalBloc(e){if(this.mocksEnabled){const t=this.mockBlocs.find((t=>t instanceof e));if(t)return t}return this.blocListGlobal.find((t=>t instanceof e))}getLocalBlocForProvider(e,t){for(const n of this.providerList)if(n.id===e){if(n.bloc instanceof t)return n.bloc;let e=n.parent;for(;e;){const n=this.providerList.find((t=>t.id===e));if((null==n?void 0:n.bloc)instanceof t)return n.bloc;e=null==n?void 0:n.parent}}}getGlobalBlocInstance(e,t){if(this.mocksEnabled){const e=this.mockBlocs.find((e=>e instanceof t));if(e)return e}return e.find((e=>e instanceof t))}}{constructor(e,t){super(e,t),this.providerCount=0,this._contextLocalProviderKey=i.createContext("none"),this.useBloc=(e,t={})=>{const n=l(l({},oe),t);let s=c.exports.useMemo((()=>t.create?t.create():void 0),[]);if(!s){const t=c.exports.useContext(this._contextLocalProviderKey),n=c.exports.useMemo((()=>this.getLocalBlocForProvider(t,e)),[]);s=c.exports.useMemo((()=>n||this.getGlobalBlocInstance(this._blocsGlobal,e)),[])}const{subscribe:r,shouldUpdate:o=!0}=n;if(!s){const t=e.prototype.constructor.name,n=new ae(`"${t}" \n      no bloc with this name was found in the global context.\n      \n      # Solutions:\n      \n      1. Wrap your code in a BlocProvider.\n      \n      2. Add "${t}" to the "BlocReact" constructor:\n        const state = new BlocReact(\n          [\n            ...\n            new ${t}(),\n          ]\n        )\n      `);return console.error(n.error),[le,{},{error:n,complete:!0}]}const[a,i]=c.exports.useState(s.state),h=c.exports.useCallback((e=>{(!0===o||o({nextState:e,currentState:a}))&&i(e)}),[]);return c.exports.useEffect((()=>{if(r){const e=null==s?void 0:s.subscribe({next:h});return()=>{null==e||e.unsubscribe()}}}),[]),[a,s]},this.withBlocProvider=e=>t=>{const{BlocProvider:n}=this;return class extends i.Component{render(){return i.createElement(n,{bloc:e},i.createElement(t,l({},this.props)))}}},this._blocsGlobal=e,this.BlocProvider=this.BlocProvider.bind(this),this.BlocBuilder=this.BlocBuilder.bind(this)}BlocBuilder(e){const t=this.useBloc(e.blocClass,{shouldUpdate:e.shouldUpdate});return e.builder(t)}BlocProvider(e){const t=c.exports.useMemo((()=>U()),[]),n=c.exports.useContext(this._contextLocalProviderKey),s=c.exports.useMemo((()=>{const s="function"==typeof e.bloc?e.bloc(t):e.bloc;return s?this.addLocalBloc({bloc:s,id:t,parent:n}):console.error("BLoC is undefined"),s}),[]),r=c.exports.useMemo((()=>i.createContext(s)),[s]);return c.exports.useEffect((()=>()=>{this.removeLocalBloc(t,s)}),[]),i.createElement(this._contextLocalProviderKey.Provider,{value:t},i.createElement(r.Provider,{value:s},e.children))}}class ce{constructor(e,t){this.blocs=e,this.updated=t}}const he=new class extends q{constructor(){super(new ce([])),this.add=e=>{this.emit(new ce([...this.state.blocs,e]))},this.remove=e=>{this.emit(new ce(this.state.blocs.filter((t=>t.id!==e.id))))},this.update=e=>{this.emit(new ce(this.state.blocs.map((t=>t.id===e.id?e:t)),e))}}};new ie([he]).useBloc;const ue=new ie([new Z,new se,new z],{observer:new class extends re{constructor(){super(),this.onBlocAdded=e=>{he.add(e)},this.onBlocRemoved=e=>{he.remove(e)},this.onChange=e=>{he.update(e)}}}}),{useBloc:de,BlocBuilder:me,BlocProvider:be,withBlocProvider:pe}=ue;function Ee(){const[,{increment:e,decrement:t}]=de(z,{subscribe:!1});return i.createElement("div",null,i.createElement(h,{color:"secondary",onClick:t},"DECREMENT"),i.createElement(h,{color:"primary",onClick:e},"INCREMENT"))}class ve extends q{constructor(){super("one")}}function ge(){const[e,t]=de(se);return i.createElement(u,null,i.createElement(d,null,i.createElement(m,null,"State: ",JSON.stringify(e)),i.createElement(b,null,i.createElement(h,{onClick:()=>t.add(te.authenticated)},"Login"),i.createElement(h,{onClick:()=>t.add(te.unknown)},"Unknown"),i.createElement(h,{onClick:()=>t.add(te.unauthenticated)},"logout"))))}const fe=p((e=>({toolbar:e.mixins.toolbar}))),Ce=()=>{const[e,t]=de(ve);return i.createElement(h,{onClick:()=>t.emit(`${Math.random()}`)},e)},xe=()=>{const[e]=de(X,{create:()=>new X(300)});return i.createElement("div",null,"Local: ",e)},Le=pe(new X(2e3))((({text:e})=>{const[t]=de(X);return i.createElement("div",null,e,": ",t)})),Be=()=>{const[e,t]=c.exports.useState(!1),[n,s]=de(ve);return i.createElement("div",null,i.createElement(Ee,null),e&&i.createElement("div",null,n,i.createElement("hr",null),i.createElement(be,{bloc:()=>new z},i.createElement(m,{variant:"h4"},"Local Provider #1"),i.createElement(me,{blocClass:z,builder:([e,{increment:t}])=>i.createElement("div",null,i.createElement(h,{onClick:()=>t()},e),i.createElement(Ee,null))}))),";",i.createElement(v,null),i.createElement(h,{onClick:()=>s.emit(`${Math.random()}`)},"RND"),i.createElement(h,{onClick:()=>t(!e)},"Toggle"))};function we(){const[e,t]=c.exports.useState(!1),n=fe();return i.createElement(i.Fragment,null,i.createElement(E,{height:100}),i.createElement("div",{className:n.toolbar}),i.createElement(m,{variant:"h3"},"Bloc"),i.createElement(ge,null),i.createElement(E,{m:2}),i.createElement(m,{variant:"h3"},"BlocBuilder"),i.createElement(u,null,i.createElement(d,null,i.createElement(me,{blocClass:z,builder:([e,{increment:t}])=>i.createElement("div",null,i.createElement(h,{onClick:()=>t()},e))}),i.createElement(Ee,null),i.createElement(E,{m:2}),i.createElement(me,{blocClass:se,builder:([e,{add:t}])=>i.createElement("div",null,i.createElement(h,{onClick:()=>t(te.authenticated)},"Auth Bloc State: ",i.createElement("b",null,e.toString())))}))),i.createElement(E,{m:2}),i.createElement(m,{variant:"h3"},"Breaking"),i.createElement(u,null,i.createElement(d,null,i.createElement(be,{bloc:()=>new ve},i.createElement(Be,null)))),i.createElement(E,{m:2}),i.createElement(m,{variant:"h3"},"Local Bloc Hook"),i.createElement(u,null,i.createElement(d,null,i.createElement(xe,null))),i.createElement(E,{m:2}),i.createElement(m,{variant:"h3"},"Local Bloc HOC"),i.createElement(u,null,i.createElement(d,null,i.createElement(Le,{text:"HOC with props"}))),i.createElement(m,{variant:"h3"},"Local Providers"),i.createElement(u,null,i.createElement(d,null,i.createElement(be,{bloc:()=>new Q},i.createElement(m,{variant:"h4"},"Local Counter Timer"),i.createElement(me,{blocClass:Q,builder:([e])=>i.createElement("div",null,i.createElement(h,null,e))})),i.createElement(be,{bloc:()=>new Q(500)},i.createElement(m,{variant:"h4"},"Local Counter Timer 2"),i.createElement(me,{blocClass:Q,builder:([e])=>i.createElement("div",null,i.createElement(h,null,e))})),i.createElement(be,{bloc:()=>new z},i.createElement(m,{variant:"h4"},"Local Provider #1"),i.createElement(me,{blocClass:z,builder:([e,{increment:t}])=>i.createElement("div",null,i.createElement(h,{onClick:()=>t()},e),i.createElement(Ee,null))})),i.createElement(be,{bloc:()=>new z},i.createElement(m,{variant:"h4"},"Local Provider #2"),i.createElement(me,{blocClass:z,builder:([e,{increment:t}])=>i.createElement("div",null,i.createElement(h,{onClick:()=>t()},e),i.createElement(Ee,null))})),i.createElement(be,{bloc:new z},i.createElement(be,{bloc:new ve},e&&i.createElement(Ce,null)),i.createElement(h,{onClick:()=>t(!e)},"Toggle Show")))))}function ye(){return i.createElement(g,null,i.createElement(f,{path:"/"},i.createElement(we,null)),i.createElement(f,{path:"/sandbox"},i.createElement(we,null)))}const ke=p((e=>({root:{display:"flex"},drawer:{[e.breakpoints.up("sm")]:{width:240,flexShrink:0}},appBar:{[e.breakpoints.up("sm")]:{width:"calc(100% - 240px)",marginLeft:240}},menuButton:{marginRight:e.spacing(2),[e.breakpoints.up("sm")]:{display:"none"}},toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3),marginBottom:"400px"}})));function Se(){const e=ke(),t=x(),[n,s]=i.useState(!1),[{darkMode:r},o]=de(Z),a=()=>{s(!n)},l=i.createElement("div",null,i.createElement("div",{className:e.toolbar}),i.createElement(v,null),i.createElement(L,null,i.createElement(B,{button:!0,component:w,to:"/sandbox"},i.createElement(y,null,i.createElement(k,null)),i.createElement(S,{primary:"Sandbox"}))),i.createElement(T,null,i.createElement(O,{control:i.createElement(P,{checked:r,onChange:()=>o.toggleTheme(),name:"Dark mode"}),label:"Dark Mode"}))),c=document.body;return i.createElement("div",{className:e.root},i.createElement(M,{position:"fixed",className:e.appBar},i.createElement(R,null,i.createElement(A,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:a,className:e.menuButton},i.createElement(_,null)),i.createElement(m,{variant:"h6",noWrap:!0},"Responsive drawer"))),i.createElement("nav",{className:e.drawer,"aria-label":"mailbox folders"},i.createElement(V,{smUp:!0,implementation:"css"},i.createElement(j,{container:c,variant:"temporary",anchor:"rtl"===t.direction?"right":"left",open:n,onClose:a,classes:{paper:e.drawerPaper},ModalProps:{keepMounted:!0}},l)),i.createElement(V,{xsDown:!0,implementation:"css"},i.createElement(j,{classes:{paper:e.drawerPaper},variant:"permanent",open:!0},l))),i.createElement("main",{className:e.content},i.createElement(ye,null)))}Se.propTypes={window:C.func};const Te=N({palette:{type:"dark",primary:{main:D.A200},secondary:{main:K.A200}}}),Oe=N({palette:{type:"light",primary:{main:K[500]},secondary:{main:"#11cb5f"}}});function Pe(){const[{darkMode:e}]=de(Z);return i.createElement(I,{theme:e?Te:Oe},i.createElement(G,null),i.createElement($,null,i.createElement(Se,null)))}J.render(i.createElement(Pe,null),document.getElementById("root"));
